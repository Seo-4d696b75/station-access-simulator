# ekimemo-access-simulator

![npm version](https://img.shields.io/npm/v/ekimemo-access-simulator.svg)
![npm license](https://img.shields.io/npm/l/ekimemo-access-simulator.svg)
![npm types](https://img.shields.io/npm/types/ekimemo-access-simulator.svg)
![test workflow](https://github.com/Seo-4d696b75/station-access-simulator/actions/workflows/test.yml/badge.svg)


ã€Œé§…ãƒ¡ãƒ¢ã€ã®ã‚¢ã‚¯ã‚»ã‚¹ã‚¤ãƒ™ãƒ³ãƒˆã‚’ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã™ã‚‹JavaScript(TypeScript)ãƒ©ã‚¤ãƒ–ãƒ©ãƒª

# How to Use

## CDNã§Webãƒ–ãƒ©ã‚¦ã‚¶ã‹ã‚‰åˆ©ç”¨
`head`ã‚¿ã‚°å†…ã«è¿½åŠ   

```html
<script language="javascript" type="text/javascript" src="https://cdn.jsdelivr.net/npm/ekimemo-access-simulator@0.2.0/umd/simulator.min.js"></script>
```

åˆ©ç”¨ä¾‹ï¼š[[CodePen] CDN on Web](https://codepen.io/seo-4d696b75/pen/RwjoWeR)

## node module ã¨ã—ã¦ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
$ > npm install ekimemo-access-simulator
```

åˆ©ç”¨ä¾‹ï¼š[[CodeSandbox] TypeScript + Node.js](https://codesandbox.io/s/yi-memo-akusesusimiyureta-cor73?file=/src/index.ts)

# Release Note
[å„ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®å·®åˆ†è©³ç´°ã¯ã“ã¡ã‚‰](https://github.com/Seo-4d696b75/station-access-simulator/releases)  

**v0.2.0**
- ã‚¹ã‚­ãƒ«ã®ç™ºå‹•æ¡ä»¶ãƒ»ç™ºå‹•å‡¦ç†ã®ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯å®šç¾©ã‚’å¤‰æ›´
  - ã‚¢ã‚¯ã‚»ã‚¹æ™‚ã®ç™ºå‹•æ¡ä»¶ãƒ»ç™ºå‹•å‡¦ç†ã‚’åŒä¸€ã®ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ã«çµ±ä¸€  
    `canEvaluate, evaluate` => `triggerOnAccess`  
    é–¢æ•°ã®è¿”ã‚Šå€¤ã§ç™ºå‹•ç¢ºç‡ãƒ»ç™ºå‹•æ™‚ã®å‡¦ç†ã‚’åŒæ™‚ã«æŒ‡å®šã§ãã¾ã™
  - å‘½åã®å¤‰æ›´  
    `evaluateOnEvent` => `triggerOnEvent`
- é€±æœ«ãƒ»ç¥æ—¥ã®åˆ¤å®šå‡¦ç†ã‚’è¿½åŠ 
- ãƒ¦ãƒ¼ã‚¶ã®æƒ…å ±ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹ã‚’è¿½åŠ 
  - ãƒ¦ãƒ¼ã‚¶ã®é§…ã‚¢ã‚¯ã‚»ã‚¹æƒ…å ±ã®å®šç¾© `StationStatistics`
  - å½“æ—¥ã®ç§»å‹•ãƒ»ã‚¢ã‚¯ã‚»ã‚¹æƒ…å ±ã®å®šç¾© `DailyStatistics`
  - èª­ã¿å‡ºã—æ–¹æ³•ã®è¿½åŠ  `UserPropertyReader`
- ã‚¹ã‚­ãƒ«çŠ¶æ…‹ã«ç™ºå‹•æ™‚åˆ»ã®è¨˜éŒ²ã‚’è¿½åŠ ï¼ˆã‚¢ã‚µã®ã‚¹ã‚­ãƒ«ãŒåˆ©ç”¨ï¼‰
- ã‚¹ã‚­ãƒ«çŠ¶æ…‹ã«ã‚«ã‚¹ã‚¿ãƒ ãƒ‡ãƒ¼ã‚¿ï¼ˆä»»æ„ã®ãƒ‡ãƒ¼ã‚¿ï¼‰ã‚’å®šç¾©å¯èƒ½ã«  
  - å‹å®‰å…¨ãªèª­ã¿æ›¸ã `boolean, number, string, number[], string[]`
  - çŠ¶æ…‹ã®è¤‡è£½æ©Ÿèƒ½
  - ã‚ãŸã‚‹ã®ã‚¹ã‚­ãƒ«ã§åˆ©ç”¨
- ã‚¹ã‚­ãƒ«ã®ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯é–¢æ•°`onDencoReboot`ã®å®Ÿè£…
- ä¸å…·åˆã®ä¿®æ­£
  - ã„ã‚ã¯ã®ã‚¹ã‚­ãƒ«ã®è‡ªèº«ã‚ˆã‚Šé«˜ãƒ¬ãƒ™ãƒ«ã®ã§ã‚“ã“ã«ãƒªãƒ³ã‚¯ã‚’æ¸¡ã›ã¦ã—ã¾ã†
  - ãƒ¬ãƒ™ãƒ«ã‚¢ãƒƒãƒ—ã§ã‚¹ã‚­ãƒ«çŠ¶æ…‹ãŒãƒªã‚»ãƒƒãƒˆã•ã‚Œã¦ã—ã¾ã†
- ã‚¹ã‚­ãƒ«ã®è¿½åŠ 
  - 27 ã‚„ã¡ã‚ˆ
  - 28 ãƒªã‚ªãƒŠ
  - 30 ãƒ¬ãƒ¼ãƒ
  - 31 ã‚ã‚Šã™
  - 32 ã‚³ã‚¿ãƒ³
  - 33 ã‚¨ãƒªã‚¢
  - 35 ã„ãŠã‚Š
  - 37 ã¿ã“ã¨
  - 38 ãã«
  - 39 ã‚‹ã‚‹
  - 41 ã«ã¡ãª
  - 42 ãã‚‰
  - 43 ã‚¢ã‚µ
  - 44 ã•ã„ã‹
  - 45 ã‚«ãƒãƒ³
  - 46 ã‚ãŸã‚‹
  - 48 ã‚¹ãƒ”ã‚«
  - 49 ãƒ¡ã‚¤
  - 50 ãªã»


**v0.1.6**
- ã‚¿ã‚¤ãƒã®ä¿®æ­£

# Docs
[ã‚¢ã‚¯ã‚»ã‚¹å‡¦ç†ã®å®Ÿè£…ã‚’è©³ã—ãèª¬æ˜ã—ã¾ã™](./docs/access.md)

# Basic Usage
ã¾ãšã¯ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’åˆæœŸåŒ–ã—ã¦ã§ã‚“ã“ãƒ»ã‚¹ã‚­ãƒ«ã®ãƒ‡ãƒ¼ã‚¿ã‚’ãƒ­ãƒ¼ãƒ‰ã—ã¾ã™
```js
import { init } from "ekimemo-access-simulator";
// init() ã¯éåŒæœŸé–¢æ•°ã§ã™ æº–å‚™ãŒçµ‚ã‚ã‚‹ã¾ã§å¾…ã¡ã¾ã—ã‚‡ã†
init().then(() => {
  // your code here
});
// ã‚‚ã—ãã¯éåŒæœŸé–¢æ•°å†…ã§ init() ã‚’å‘¼ã³å‡ºã—ã¾ã™
async function run() {
  await init();
  // your code here
}
```

æ¬¡ã«ã‚¢ã‚¯ã‚»ã‚¹ã‚’è¡Œã†ç·¨æˆã®çŠ¶æ…‹ï¼ˆãƒã‚¹ã‚¿ãƒ¼ã®çŠ¶æ…‹ï¼‰ã‚’åˆæœŸåŒ–ã—ã¾ã™
```js
import { DencoManager, initContext, initUser } from "ekimemo-access-simulator"

  // context ã«ã¯ã™ã¹ã¦ã®å‡¦ç†ã«é–¢ã™ã‚‹ãƒ­ã‚°ãƒ»ç–‘ä¼¼ä¹±æ•°ãƒ»å‡¦ç†æ™‚åˆ»ã®æƒ…å ±ãŒä¿æŒã•ã‚Œã¦ã„ã¾ã™
  const context = initContext("this is test", "random seed", true);
  // ã§ã‚“ã“ã®çŠ¶æ…‹å¤‰æ•°ã‚’åˆæœŸåŒ–ã—ã¾ã™ (ä¾‹)ãƒ¬ã‚¤ã‚«:"5" level:80
  let reika = DencoManager.getDenco(context, "5", 80);
  // ç·¨æˆçŠ¶æ…‹ã‚’ãƒ¬ã‚¤ã‚«ã²ã¨ã‚Šã§åˆæœŸåŒ–ã—ã¾ã™
  let master1 = initUser(context, "master1", [reika]);
```

ã“ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¯é–¢æ•°æŒ‡å‘ã§è¨­è¨ˆã•ã‚Œã¦ã„ã¾ã™ ç¾åœ¨ã®çŠ¶æ…‹å¤‰æ•°ã‚’é–¢æ•°ã«æ¸¡ã—æ–°ã—ã„çŠ¶æ…‹å¤‰æ•°ã‚’è¿”ã™ã€ã¨ç¹°ã‚Šè¿”ã—ã¦å‡¦ç†ã‚’é€²ã‚ã¾ã™
```js
import { activateSkill, changeFormation, DencoManager } from "ekimemo-access-simulator"

  // case 1: ç·¨æˆã‚’å¤‰ãˆã‚‹
  let seria = DencoManager.getDenco(context, "1", 50);
  master1 = changeFormation(context, master1, [reika, seria]);
  // case 2: ç·¨æˆå†…ã®ãƒ¬ã‚¤ã‚«ã®ã‚¹ã‚­ãƒ«ã‚’æœ‰åŠ¹åŒ–ã™ã‚‹ (0å§‹ã¾ã‚Šã§æ•°ãˆã‚‹ç·¨æˆå†…ä½ç½®ã§æŒ‡å®šã—ã¾ã™)
  master1 = activateSkill(context, master1, 0);
```

å®Ÿéš›ã«ã‚¢ã‚¯ã‚»ã‚¹ã‚’ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã—ã¾ã™
```js
import { AccessConfig, printEvents, startAccess } from "ekimemo-access-simulator"

  // ç›¸æ‰‹ã®ç·¨æˆã‚’ç”¨æ„ ã“ã®ã‚·ãƒ£ãƒ«ãƒ­ãƒƒãƒ†ã¯ãƒ©ãƒ³ãƒ€ãƒ ã«é¸æŠã•ã‚ŒãŸï¼“é§…ã®ãƒªãƒ³ã‚¯ã‚’ä¿æŒã—ã¦ã„ã¾ã™
  let charlotte = DencoManager.getDenco(context, "6", 50, 3);
  let master2 = initUser(context, "master2", [charlotte]);
  // ã‚¢ã‚¯ã‚»ã‚¹ã®è©³ç´°ã‚’ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã§å®šç¾©ã—ã¦æ¸¡ã—ã¾ã™
  let config: AccessConfig = {
    // master1 ã®ãƒ¬ã‚¤ã‚«ãŒ master2 ã®ã‚·ãƒ£ãƒ«ãƒ­ãƒƒãƒ†ãŒä¿æŒã—ã¦ã„ã‚‹0ç•ªç›®ã®é§…ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã¾ã™
    offense: { state: master1, carIndex: 0 }, 
    defense: { state: master2, carIndex: 0 },
    station: charlotte.link[0]
  };
  // ã‚¢ã‚¯ã‚»ã‚¹ã‚’å®Ÿè¡Œ
  const result = startAccess(context, config);
  // æ”»æ’ƒå´ã®master1ã®ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ã®æ§˜å­ã‚’è¦‹ã¦ã¿ã¾ã—ã‚‡ã†
  master1 = result.offense;
  printEvents(context, master1);
```

ã“ã“ã¾ã§ã®å‡¦ç†ã‚’å®Ÿè¡Œã™ã‚‹ã¨ Console ã«æ¬¡ã®ã‚ˆã†ãªè©³ç´°ãªæƒ…å ±ãŒå‡ºåŠ›ã•ã‚Œã¾ã™

```bash
ãƒ©ãƒ³ãƒ€ãƒ ã«é§…ã‚’é¸å‡ºï¼šå“å·,é¶¯è°·,å¤§å´
ç·¨æˆã‚’å¤‰æ›´ã—ã¾ã™ [] -> [reika]
ç·¨æˆã‚’å¤‰æ›´ã—ã¾ã™ [reika] -> [reika,seria]
ç·¨æˆã‚’å¤‰æ›´ã—ã¾ã™ [] -> [charlotte]
ã‚¹ã‚­ãƒ«çŠ¶æ…‹ã®å¤‰æ›´ï¼šreika idle -> active
ã‚¢ã‚¯ã‚»ã‚¹å‡¦ç†ã®é–‹å§‹ 01:29:04 GMT+0900 (æ—¥æœ¬æ¨™æº–æ™‚)
æ”»æ’ƒï¼šreika
ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãªã‚¹ã‚­ãƒ«(æ”»æ’ƒå´): reika
å®ˆå‚™ï¼šcharlotte
ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãªã‚¹ã‚­ãƒ«(å®ˆå‚™å´):
ã‚¹ã‚­ãƒ«ã‚’è©•ä¾¡ï¼šãƒ•ãƒƒãƒˆãƒãƒ¼ã‚¹ã®ç¢ºèª
ã‚¹ã‚­ãƒ«ã‚’è©•ä¾¡ï¼šç¢ºç‡ãƒ–ãƒ¼ã‚¹ãƒˆã®ç¢ºèª
ã‚¹ã‚­ãƒ«ã‚’è©•ä¾¡ï¼šã‚¢ã‚¯ã‚»ã‚¹é–‹å§‹å‰
ã‚¹ã‚­ãƒ«ã‚’è©•ä¾¡ï¼šã‚¢ã‚¯ã‚»ã‚¹é–‹å§‹
æ”»å®ˆã®ãƒ€ãƒ¡ãƒ¼ã‚¸è¨ˆç®—ã‚’é–‹å§‹
æ”»å®ˆã®å±æ€§ã«ã‚ˆã‚‹ãƒ€ãƒ¡ãƒ¼ã‚¸è£œæ­£ãŒé©ç”¨ï¼š1.3
ãƒ•ã‚£ãƒ«ãƒ ã«ã‚ˆã‚‹è£œæ­£ã‚’ã‚¹ã‚­ãƒƒãƒ—
ã‚¹ã‚­ãƒ«ã‚’è©•ä¾¡ï¼šATK&DEFã®å¢—æ¸›
ã‚¹ã‚­ãƒ«ãŒç™ºå‹•(æ”»æ’ƒå´) name:reika(5) skill:å¤§èµ·å‹•åŠ é€Ÿåº¦å‘ä¸Šè–¬æ³¨å…¥
ã¹ã€åˆ¥ã«ã‚ã‚“ãŸã®ç‚ºã˜ã‚ƒãªã„ã‚“ã ã‹ã‚‰ã­ï¼ ATK+45%
ã‚¹ã‚­ãƒ«ã‚’è©•ä¾¡ï¼šç‰¹æ®Šãªãƒ€ãƒ¡ãƒ¼ã‚¸è¨ˆç®—
åŸºæœ¬ãƒ€ãƒ¡ãƒ¼ã‚¸ã‚’è¨ˆç®— AP:260
åŸºæœ¬ãƒ€ãƒ¡ãƒ¼ã‚¸ã‚’è¨ˆç®— ATK:45% DEF:0% 260 * 145% * 1.3 = 490
ã‚¹ã‚­ãƒ«ã‚’è©•ä¾¡ï¼šå›ºå®šãƒ€ãƒ¡ãƒ¼ã‚¸
å›ºå®šãƒ€ãƒ¡ãƒ¼ã‚¸ã®è¨ˆç®—ï¼š0
ãƒ€ãƒ¡ãƒ¼ã‚¸è¨ˆç®—ãŒçµ‚äº†ï¼š490
å®ˆå‚™ã®çµæœ HP: 228 > 0 reboot:true
ã‚¢ã‚¯ã‚»ã‚¹çµæœã‚’ä»®æ±ºå®š
æ”»æ’ƒå´ã®ãƒªãƒ³ã‚¯æˆæœï¼štrue
å®ˆå‚™å´ã®ãƒªãƒ³ã‚¯è§£é™¤ï¼štrue
ã‚¹ã‚­ãƒ«ã‚’è©•ä¾¡ï¼šãƒ€ãƒ¡ãƒ¼ã‚¸è¨ˆç®—å®Œäº†å¾Œ
æœ€çµ‚çš„ãªã‚¢ã‚¯ã‚»ã‚¹çµæœã‚’æ±ºå®š
HPç¢ºå®š reika 312 > 312 reboot:false
HPç¢ºå®š charlotte 228 > 0 reboot:true
æ”»æ’ƒå´ã®ãƒªãƒ³ã‚¯æˆæœï¼štrue
å®ˆå‚™å´ã®ãƒªãƒ³ã‚¯è§£é™¤ï¼štrue
çµŒé¨“å€¤è¿½åŠ  reika 0 + 100
çµŒé¨“å€¤è¿½åŠ  charlotte 0 + 0
ã‚¢ã‚¯ã‚»ã‚¹å‡¦ç†ã®çµ‚äº†
ãƒ¬ãƒ™ãƒ«ã‚¢ãƒƒãƒ—ï¼šcharlotte Lv.50->Lv.51
ç¾åœ¨ã®çµŒé¨“å€¤ï¼šcharlotte 14469/38700
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
â”ƒ                      access/connect                      â”ƒ
â”ƒ                           å“å·                           â”ƒ
â”ƒ                         ã—ãªãŒã‚                         â”ƒ
â”ƒ  charlotte   â•±â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    reika     â”ƒ
â”ƒ    Lv.50     â•²â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    Lv.80     â”ƒ
â”ƒ    ecoğŸŒ³                 æ•°ç§’å‰                heatğŸ”¥    â”ƒ
â” â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¨
â”ƒcharlotteã®ãƒã‚¹ã‚¿ãƒ¼        user            reikaã®ãƒã‚¹ã‚¿ãƒ¼  â”ƒ
â” â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¨
â”ƒ-                          skill                     reikaâ”ƒ
â” â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¨
â”ƒ490                       damage                         -â”ƒ
â” â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¨
â”ƒ228>>0/228                  hp                     312/312â”ƒ
â” â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¨
â”ƒ-                          link                          -â”ƒ
â” â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¨
â”ƒ3,775pt                    score                     100ptâ”ƒ
â” â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¨
â”ƒ3,775pt                     exp                      100ptâ”ƒ
â” â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¨
â”ƒ                   reikaãŒãƒªãƒ³ã‚¯ã‚’é–‹å§‹                     â”ƒ
â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›
```
